<!DOCTYPE html>
<html>
        <head>
                <title>NIRANJAN CREATIONS</title>
                <link rel="manifest" href="python.json">
                <script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/dist/skulpt.min.js"></script>                           <script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/dist/skulpt-stdlib.js"></script>
        </head>
        <body style="background:linear-gradient(to left,lightpink,lightblue);color:navy;">
<style>
.rotate{
        animation : spin 2s linear infinite;
}
@keyframes spin {
        0%{
                transform:rotateY(0deg);
        }
        100%{
                transform:rotateY(360deg);
        }
}
.input-line input {
    background-color: black;
    color: lime;
    border:solid black;
    font-size: 20px;
    width: 200px;
    outline: none;
}
</style>
                <marquee style="background-color:maroon;color:yellow;font-size:35px;" behaviour="scroll" scrollamount="15" direction="right">PYTHON INTREPTER</marquee>
                <center>
                        <img src="https://hacker1514.github.io/python/kni.png" width="100px" height="100px" class=rotate style="border-radius:50%;border:solid cyan">
                        <marquee style="font-size:25px;" behaviour="scroll" scrollamount="15" direction="right" ><span style="color:red;">[  </span><span style="color:olive;">DEVELOPER : </span><span ><u>Niranjan Kumar</u></span><span style="color:red;">  ]</span></marquee>

<button style="border:solid blue;color:lime;background-color:teal;font-size:30px;" onclick="save();">SAVE</button>
<button style="border:solid black;color:lime;background-color:teal;font-size:30px;" onclick="r();">REFRESH</button>
<button style="border:solid yellow;color:lime;background-color:teal;font-size:30px;" onclick="runPython();">RUN</button>
<button style="border:solid red;color:lime;background-color:teal;font-size:30px;" onclick="install();">INSTALL</button>
<button style="border:solid cyan;color:lime;background-color:teal;font-size:30px;" onclick="feedback();">FEEDBACK</button>
</br></br>
<audio src="https://github.com/Niranjan164/COMPILER/raw/main/click-151673_073339.mp3" id="m"></audio>
<textarea id="code" style="color:red;background-color:black;font-size:25px;width:900px;height:400px;border:solid cyan;" autocapitalize='off'>
print("HELLO PYTHON PROGRAMMERS !\n ALL THE BEST FOR YOUR PYTHON LEARNING.")

#continue your programs by clearing default code.
</textarea></br>
<h1 style="color:blue;" >OUTPUT:</H1>
<pre id="output" style="background-color:black;color:lime;font-size:25px;width:900px;"></pre>

<script>
        let p;
        window.addEventListener('beforeinstallprompt',e=>{
                e.preventDefault();
                p=e;
        });
        function install(){
                music.play();
                if(p){
                        p.prompt();
                }
        }
        if('serviceWorker' in navigator){
        navigator.serviceWorker.register('python.js');
        }
        let music=document.getElementById("m");
function builtinRead(x) {
    if (!Sk.builtinFiles || !Sk.builtinFiles["files"][x]) throw "File not found: " + x;
    return Sk.builtinFiles["files"][x];
}
        function feedback(){
                music.play();
                window.open("https://hacker1514.github.io./python/feedback.html","_self");
        }

function runPython() {
        music.play();
    document.getElementById("output").innerHTML = "";
    let prog = document.getElementById("code").value;
    Sk.configure({
        output: outf,
        read: builtinRead,
        inputfun: customInput,
        inputfunTakesPrompt: true
    });
    Sk.misceval.asyncToPromise(() => Sk.importMainWithBody("<stdin>", false, prog, true))
    .catch(err => document.getElementById("output").innerHTML += "\n⚠️ " + err.toString());
}

function outf(text) {
    document.getElementById("output").innerHTML += text;
}

function customInput(promptText) {
    return new Promise((resolve) => {
        let out = document.getElementById("output");
        out.innerHTML += promptText;

        let inputLine = document.createElement("span");
        inputLine.className = "input-line";

        let inputBox = document.createElement("input");
        inputBox.type = "text";
        inputBox.autofocus = true;

        let cursor = document.createElement("span");
        cursor.className = "cursor";

        inputLine.appendChild(inputBox);
        inputLine.appendChild(cursor);
        out.appendChild(inputLine);

        inputBox.focus();

        inputBox.addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                let value = inputBox.value;
                out.removeChild(inputLine);
                out.innerHTML += value + "\n";
                resolve(value);
            }
        });
    });
}
        function r(){
                music.play();
                location.reload();
        }
        function save(){
    music.play();
    let text = document.getElementById("code").value;
    let fn=prompt("Enter file name to store:\n");
    let fileName = fn+".txt";

    let blob = new Blob([text], { type: "text/plain" });

    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = fileName;
    link.click();
}
</script>
</body>
</html>
